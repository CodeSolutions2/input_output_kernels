<!DOCTYPE>
<html>
<head></head>
<body>

<progress id="progress_bar" max="100" value="0" style="display:none">0%</progress>

<div id="display_data">

<div id="output">

<script>

(async () => {
  var [xs_2d, ys_1d] = await obtain_train_data();
console.log("xs_2d: ", xs_2d);
})();


async function timeSampling_array() {

  const n = 100;
  var f = 1/10; // sampling rate.
  var t = Array.from({length:n}, (v,i) => { return i*f; });
  return t;
}


async function topic_measurements() {

  var t = await timeSampling_array();

  var sin0 = t.map((v,i) => { return Math.sin(v); });
  var sin1 = t.map((v,i) => { return 5*Math.sin(v); });
  var sin2 = t.map((v,i) => { return 10*Math.sin(v); });

  return [sin0, sin1, sin2];
}


async function obtain_train_data() {

  var [sin0, sin1, sin2] = await topic_measurements();

  // Past dataset 0
  var feature0_ds0 = sin0.map((v,i) => { return v+(0.1*Math.random()); });
  var feature1_ds0 = sin1.map((v,i) => { return v+(0.01*Math.random()); });
  var feature2_ds0 = sin2.map((v,i) => { return v+(0.1*Math.random()); });

  // Past dataset 1
  var feature0_ds1 = sin0.map((v,i) => { return v+(0.01*Math.random()); });
  var feature1_ds1 = sin1.map((v,i) => { return v+(0.1*Math.random()); });
  var feature2_ds1 = sin2.map((v,i) => { return v+(0.001*Math.random()); });
  
  // Way 0: stack past data
  var xs = [];
  var ys = [];
  var samples = sin0.length;
  for (var i=0; i<samples; i++) {
    
    // Randomly select features from each past dataset.
    var j = Math.floor(2*Math.random());

    var x_stack = [[feature0_ds0.at(i), feature0_ds1.at(i)], 
                   [feature1_ds0.at(i), feature1_ds1.at(i)]];
  
    xs.push(x_stack.at(j));

    var y_stack = [feature2_ds0.at(i), feature2_ds1.at(i)];
    
    ys.push(y_stack.at(j));
  }
    return [xs, ys];
}


</script>
</body>
</html>
