<!DOCTYPE html>
<html>
<head></head>
<body>  


<button id="run_selection" onclick="run_selection()">run_selection</button>

<div id="output">

<script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs"></script>


<script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/knn-classifier"></script>


<script>

async function run_selection() {

const xs = [[0,0],
           [0,1],
           [1,1],
           [3,0],
           [4,2],
           [1,0]];

const ys = [0,0,0,1,1,0];

const row = xs.length;

const classifier = knnClassifier.create();

document.getElementById("output").innerHTML += classifier;
document.getElementById("output").innerHTML += "<br>";

for (var i=0; i<row; i++) {
  classifier.addExample(tf.tensor(xs.at(i)), ys.at(i));
}

document.getElementById("output").innerHTML += "finished adding samples";
document.getElementById("output").innerHTML += "<br>";

const index = Number(Math.floor(Math.random()*row));
document.getElementById("output").innerHTML += index;
document.getElementById("output").innerHTML += "<br>";

const test_input = xs.at(index);
document.getElementById("output").innerHTML += "test_input: "+test_input;
document.getElementById("output").innerHTML += "<br>";

const result = await classifier.predictClass(tf.tensor(test_input));
document.getElementById("output").innerHTML += "result: "+result;
document.getElementById("output").innerHTML += "<br>";

// const result_js0 = await result.data();
// document.getElementById("output").innerHTML += "result0: "+result_js0;
// document.getElementById("output").innerHTML += "<br>";

// const result_js1 = await JSON.stringify(result);
// document.getElementById("output").innerHTML += "result1: "+result_js1;


const out = await classifier.getClassExampleCount();
document.getElementById("output").innerHTML += "out: "+out;
document.getElementById("output").innerHTML += "<br>";

} // end of run_selection

</script>
</body>
</html>
