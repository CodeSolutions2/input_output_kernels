<!DOCTYPE>
<html>
<head></head>
<body>

<video class="video_simple" id="video0"></video>

<img class="image_simple" id="image0"/>

<div class="div_simple" id="div0"></div>

<div id="output"></div>

<style>
.video_simple {
  width: 100px;
  height: 100px;
  border: 1px solid gray;
  border-radius: 5px;
  background-color: seagreen;
}

#video0:before {
  content: "video0";
}

.image_simple {
  width: 100px;
  height: 100px;
  border: 1px solid gray;
  border-radius: 5px;
}

#image0:before {
  content: "image0";
}

.div_simple {
  width: 100px;
  height: 100px;
  border: 1px solid gray;
  border-radius: 5px;
}

#div0:before {
  content: "div0";
}

</style>


<script>

document.getElementById("video0").onclick = async (event) => {
  
  var options0 = {video: true, preferCurrentTab: true, }
//var options0 = {video: {displaySurface: "browser"}}
  document.getElementById("output").innerHTML += "options0: "+options0+"<br>";

  
  await navigator.mediaDevices.getDisplayMedia(options0).then(stream => {


      document.getElementById("output").innerHTML += "here<br>";
      
      const track = stream.getVideoTracks()[0];

    document.getElementById("video0").srcObject = stream;
      
      var imageCapture = new ImageCapture(track);
      
      imageCapture
        .takePhoto()
        .then((blob_object) => {
          var url = URL.createObjectURL(blob_object);
          
          document.getElementById("output").innerHTML += "url: "+url+"<br>";
          document.getElementById("image0").src = url;
        });
   
    })

}




</script>
</body>
</html>